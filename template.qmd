---
title: "Germany"
output-file: "venezuela"
iso: "VEN"
execute:
  echo: false
  warning: false
format:
  gdi-country-snapshot-typst: default
---

```{r}
#| include: false
devtools::load_all(".")
knitr::opts_chunk$set(dev = "svglite")
code <- rmarkdown::metadata$iso
i <- 1
j <- 0
```

<!-- ```{=typst} -->
<!-- `r add_typst("typst")` -->
<!-- ``` -->

<!-- ```{=typst} -->
<!-- #grid( -->
<!--   columns: (40%, 1%, 59%), -->
<!--   box(fill: rgb("#f4f8fd"), inset: .8em)[ -->
<!--     #h0[ABOUT] -->
<!--     #about[ -->
<!--       #abouthead[This #b[Country Data Snapshot] is a brief overview of migration-related statistics from global datasets compiled by UN agencies and other international organisations.] -->

<!--       #aboutnotes[Maps are for illustration purposes only. The boundaries and names shown and the designations used on maps do not imply official endorsement or acceptance by IOM. `r kosovo_disclaimer(code)` -->

<!--         Data are subject to the inherent limitations of global datasets and should be considered as statistical baselines, especially in the absence of more precise local data. Figures may differ from those published by national statistics offices or other sources.]] -->
<!--   ], -->
<!--   none, -->
<!--   box(inset: .8em)[ -->
<!--     #h0[CONTENTS] -->
<!--     #contents[ -->
<!--       - How many emigrants and immigrants are there? What are their destinations and origins? What is their age and sex structure? `r fig(1:3)` -->

<!--       - What are trends and patterns of net migration? `r fig(4:5)` -->

<!--       - When and where have displacements occurred? What are the causes? `r fig(6:8)` -->

<!--       - When and where have migrants died or gone missing? `r fig(9:10)` -->

<!--       - How many refugees are there? `r fig(11)` -->

<!--       - How large are remittances and foreign direct investment? `r fig(12:13)` -->

<!--       - What are the demographic features of the overall population? `r fig(14:16)` -->

<!--       - How have economic indicators developed? `r fig(17:19)` -->
<!--     ] -->
<!--   ], -->
<!-- ) -->
<!-- ``` -->

<!-- ```{=typst} -->
<!-- #h1[I. MIGRATION] -->
<!-- ``` -->

```{=typst}
#header(name: "I. Migration")
```

```{=typst}
`r caption_stocks(code)`
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.75
#| message: false

snap_plot("stocks", code, basesize = basesize, font = font) |> 
  plot_label(i, span = 1, h = .15 / 2.75)
i <- i + 1
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.25
#| message: false

snap_plot("nats", code, basesize = basesize, font = font) |> 
  plot_label(i, span = 1, h = .15 / 2.25)
i <- i + 1
```

```{=typst}
///////////////////////////////////////////////////////////////////// PAGE 2 ⬇️
#pagebreak()
```

```{=typst}
#caption[`r caption_migpyr(code)`]
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.50
#| message: false

snap_plot("migpyr", code, basesize = basesize, font = font) |> 
  plot_label(i, span = 1, h = .15 / 2.50)
i <- i + 1
```

```{=typst}
#caption[`r caption_nmig(code)`]
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.50
#| message: false

cowplot::plot_grid(
  snap_plot("nmig", code, basesize = basesize, font = font) |> 
    plot_label(i, h = .15 / 2.50),
  plot_nmigmap(code, basesize = basesize, font = font) |> 
    plot_label(i + 1, h = .15 / 2.50)
)
i <- i + 2
```

```{=typst}
`r caption_idp(code)`
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.25
#| message: false

snap_plot("idp", code, basesize = basesize, font = font) |> 
  plot_label(i, span = 1, h = .15 / 2.25)
i <- i + 1
```

```{=typst}
///////////////////////////////////////////////////////////////////// PAGE 3 ⬇️
#pagebreak()
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.75
#| message: false

cowplot::plot_grid(
  snap_plot("idpmap", code, basesize = basesize, font = font) |> 
    plot_label(i, h = .15 / 2.75),
  snap_plot("idcause", code, basesize = basesize, font = font) |> 
    plot_label(i + 1, h = .15 / 2.75)
)
i <- i + 2
```

```{=typst}
#caption[`r caption_mmp(code)`]
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.50
#| message: false

cowplot::plot_grid(
  snap_plot("mmp", code, basesize = basesize, font = font) |> 
    plot_label(i, h = .15 / 2.50),
  snap_plot("mmpmap", code, basesize = basesize, font = font) |> 
    plot_label(i + 1, h = .15 / 2.50)
)
i <- i + 2
```

```{=typst}
#caption[
`r caption_refug_orig(code)`
#colbreak()
`r caption_refug_host(code)`
]
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.75
#| message: false

snap_plot("refug", code, basesize = basesize, font = font) |> 
  plot_label(i, span = 1, h = .15 / 2.75)
i <- i + 1
```

```{=typst}
///////////////////////////////////////////////////////////////////// PAGE 4 ⬇️
#pagebreak()
```

```{=typst}
#caption[
`r caption_remin(code)`
`r caption_remout(code)`
#colbreak()
`r caption_fdiin(code)`
`r caption_fdiout(code)`
]
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.25
#| message: false

cowplot::plot_grid(
  snap_plot("remt", code, basesize = basesize, font = font) |> 
    plot_label(i, h = .15 / 2.25),
  snap_plot("fdi", code, basesize = basesize, font = font) |> 
    plot_label(i + 1, h = .15 / 2.25)
)
i <- i + 2
```

```{=typst}
#header(
  name: "II. Demographics and Economy",
  note: "Data in this section refer to the general population of `r gdidata::countryname(rmarkdown::metadata$iso, to = 'name_text')` (i.e., migrant and non-migrant population)."
)
```

<!-- ```{=typst} -->
<!-- #grid( -->
<!--   columns: (auto, 1fr), -->
<!--   rows: (.4cm, .025cm), -->
<!--   rect( -->
<!--     width: auto, -->
<!--     height: 100%, -->
<!--     inset: 2pt, -->
<!--     outset: 1pt, -->
<!--     fill: rgb("#0033A0") -->
<!--   )[ -->
<!--     #text( -->
<!--       size: .7em, -->
<!--       weight: "bold", -->
<!--       fill: white, -->
<!--       baseline: 1pt, -->
<!--       "II. DEMOGRAPHICS AND ECONOMY" -->
<!--     ) -->
<!--   ], -->
<!--   rect(stroke: none)[ -->
<!--     #text( -->
<!--       fill: rgb("#4068B8"), -->
<!--       size: .6em, -->
<!--       style: "italic", -->
<!--       baseline: -3pt, -->
<!--       "Data in this section refer to the general population of `r gdidata::countryname(rmarkdown::metadata$iso, to = 'name_text')` (i.e., migrant and non-migrant population)." -->
<!--     ) -->
<!--   ], -->
<!--   rect(width: 12.5em, height: 100%, outset: 1pt, fill: rgb("#0033A0")), -->
<!--   rect(width: 100%, height: 100%, outset: 1pt, fill: rgb("#0033A0")) -->
<!-- ) -->
<!-- ``` -->

```{=typst}
#caption(ncol: 3)[
`r caption_pop(code)`
#colbreak()
`r caption_birth(code)`
#colbreak()
`r caption_depend(code)`
]
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.18
#| message: false

cowplot::plot_grid(
  snap_plot("pop", code, basesize = basesize, font = font) |> 
    plot_label(i, span = 3, h = .15 / 2.18),
  snap_plot("birth", code, basesize = basesize, font = font) |> 
    plot_label(i + 1, span = 3, h = .15 / 2.18),
  snap_plot("depend", code, basesize = basesize, font = font) |> 
    plot_label(i + 2, span = 3, h = .15 / 2.18),
  nrow = 1
)
i <- i + 3
```

```{=typst}
#caption(ncol: 3)[
`r caption_income(code)`
#colbreak()
`r caption_unem(code)`
#colbreak()
`r caption_inf(code)`
]
```

```{r}
#| fig-width: 6.7
#| fig-height: 2.18
#| message: false

cowplot::plot_grid(
  snap_plot("income", code, basesize = basesize, font = font) |> 
    plot_label(i, span = 3, h = .15 / 2.18),
  snap_plot("unem", code, basesize = basesize, font = font) |> 
    plot_label(i + 1, span = 3, h = .15 / 2.18),
  snap_plot("inf", code, basesize = basesize, font = font) |> 
    plot_label(i + 2, span = 3, h = .15 / 2.18),
  nrow = 1
)
i <- i + 3
```
